generator client {
  provider = "prisma-client"
  output   = "../src/generated/prisma"
}

datasource db {
  provider = "postgresql"
}

model Word {
  id        String   @id @default(cuid())
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt

  term         String
  meaning      String
  partOfSpeech String?
  memo         String?

  examples WordExample[]
  review   WordReview?
}

model WordExample {
  id        String   @id @default(cuid())
  createdAt DateTime @default(now())

  sentence    String
  translation String?

  wordId String
  word   Word   @relation(fields: [wordId], references: [id], onDelete: Cascade)
}

model WordReview {
  id        String   @id @default(cuid())
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt

  interval   Int      @default(1)
  easeFactor Float    @default(2.5)
  repetition Int      @default(0)
  nextReview DateTime @default(now())

  wordId String @unique
  word   Word   @relation(fields: [wordId], references: [id], onDelete: Cascade)

  logs WordReviewLog[]
}

model WordReviewLog {
  id        String   @id @default(cuid())
  createdAt DateTime @default(now())

  rating Int

  reviewId String
  review   WordReview @relation(fields: [reviewId], references: [id], onDelete: Cascade)
}
